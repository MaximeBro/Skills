@inherits FullComponentBase

<MudTabPanel Class="mark-one" Text="@Title">
    <MudContainer MaxWidth="MaxWidth.ExtraLarge">
        <MudGrid Class="mt-8" Justify="Justify.Center">
            <MudItem xs="12" sm="6" md="4">
                <MudPaper Class="rounded" Elevation="3">
                    <MudStack Row="false" Spacing="0">
                        <MudStack Class="px-6 py-4" Row>
                            <MudText Class="mark-one">Type</MudText>
                        </MudStack>
                        <MudStack Class="px-6 pb-4" Row="false" Spacing="0">
                            <EditForm Model="_typeModel" OnValidSubmit="@(async () => await AddAsync(SkillDataType.Type))">
                                <MudStack Class="mb-6 px-6" Row Justify="Justify.Center">
                                    <MudTextField T="string" @bind-Value="_typeModel.Value" Label="Ajouter un type" Placeholder="Langage" Variant="Variant.Outlined"
                                                  Adornment="Adornment.End" AdornmentIcon="@IconsF.Check" AdornmentColor="Color.Tertiary"
                                                  OnAdornmentClick="@(async () => await AddAsync(SkillDataType.Type))" @ref="_typeInput" />
                                </MudStack>
                            </EditForm>
                            <MudStack Row="false" Class="px-9 py-1" Style="height: 60vh; max-height: 60vh; overflow-y: auto;">
                                @foreach (var type in _types)
                                {
                                    <MudPaper Class="rounded pl-3 pr-6 py-3" Outlined="false" Elevation="5">
                                        <MudStack Row Spacing="0" AlignItems="AlignItems.Center">
                                            <MudToggleIconButton @bind-Toggled="_toggledPanes[type.Id]" Class="mr-3" Icon="@IconsF.ExpandMore" ToggledIcon="@IconsF.ExpandLess" Size="Size.Small" ToggledSize="Size.Small" />
                                            <MudText>@type.Value</MudText>
                                            <MudSpacer/>
                                            <MudTooltip Placement="Placement.Bottom" Text="Éditer" Arrow>
                                                <MudIconButton Icon="@IconsF.Edit" Color="Color.Primary" Size="Size.Small" OnClick="@(async () => await EditAsync(type))"/>
                                            </MudTooltip>
                                            <MudTooltip Class="ml-2" Placement="Placement.Bottom" Text="Supprimer" Arrow>
                                                <MudIconButton Class="ml-4" Icon="@IconsF.Delete" Color="Color.Error" Size="Size.Small" OnClick="@(async () => await DeleteAsync(type))"/>
                                            </MudTooltip>
                                        </MudStack>
                                    </MudPaper> 
                                    if (_toggledPanes[type.Id])
                                    {
                                        <SkillTypeLevels Parent="@this" Type="@type" />
                                    }
                                }
                            </MudStack>
                        </MudStack>
                    </MudStack>
                </MudPaper>
            </MudItem>

            <MudItem xs="12" sm="6" md="4">
                <MudPaper Class="rounded" Elevation="3">
                    <MudStack Row="false" Spacing="0">
                        <MudStack Class="px-6 py-4" Row>
                            <MudText Class="mark-one">Catégorie</MudText>
                        </MudStack>
                        <MudStack Class="px-6 pb-4" Row="false" Spacing="0">
                            <EditForm Model="_categoryModel" OnValidSubmit="@(async () => await AddAsync(SkillDataType.Category))">
                                <MudStack Class="mb-6 px-6" Row Justify="Justify.Center">
                                    <MudTextField T="string" @bind-Value="_categoryModel.Value" Label="Ajouter une catégorie" Placeholder="Microsoft" Variant="Variant.Outlined"
                                                  Adornment="Adornment.End" AdornmentIcon="@IconsF.Check" AdornmentColor="Color.Tertiary"
                                                  OnAdornmentClick="@(async () => await AddAsync(SkillDataType.Category))" @ref="_categoryInput"/>
                                </MudStack>
                            </EditForm>
                            <MudStack Row="false" Class="px-9 py-1" Style="height: 60vh; max-height: 60vh; overflow-y: auto;">
                                @foreach (var categ in _categories)
                                {
                                    <MudPaper Class="rounded mb-1 px-6 py-3" Outlined="false" Elevation="5">
                                        <MudStack Row Spacing="0" AlignItems="AlignItems.Center">
                                            <MudText>@categ.Value</MudText>
                                            <MudSpacer/>
                                            <MudTooltip Placement="Placement.Bottom" Text="Éditer" Arrow>
                                                <MudIconButton Icon="@IconsF.Edit" Color="Color.Primary" Size="Size.Small" OnClick="@(async () => await EditAsync(categ))"/>
                                            </MudTooltip>
                                            <MudTooltip Class="ml-2" Placement="Placement.Bottom" Text="Supprimer" Arrow>
                                                <MudIconButton Class="ml-4" Icon="@IconsF.Delete" Color="Color.Error" Size="Size.Small" OnClick="@(async () => await DeleteAsync(categ))"/>
                                            </MudTooltip>
                                        </MudStack>
                                    </MudPaper>
                                }
                            </MudStack>
                        </MudStack>
                    </MudStack>
                </MudPaper>
            </MudItem>

            <MudItem xs="12" sm="6" md="4">
                <MudPaper Class="rounded" Elevation="3">
                    <MudStack Row="false" Spacing="0">
                        <MudStack Class="px-6 py-4" Row>
                            <MudText Class="mark-one">Sous catégorie</MudText>
                        </MudStack>
                        <MudStack Class="px-6 pb-4" Row="false" Spacing="0">
                            <EditForm Model="_subCategoryModel" OnValidSubmit="@(async () => await AddAsync(SkillDataType.SubCategory))">
                                <MudStack Class="mb-6 px-6" Row Justify="Justify.Center">
                                    <MudTextField T="string" @bind-Value="_subCategoryModel.Value" Label="Ajouter une sous catégorie" Placeholder="Azure AD" Variant="Variant.Outlined"
                                                  Adornment="Adornment.End" AdornmentIcon="@IconsF.Check" AdornmentColor="Color.Tertiary"
                                                  OnAdornmentClick="@(async () => await AddAsync(SkillDataType.SubCategory))" @ref="_subCategoryInput"/>
                                </MudStack>
                            </EditForm>
                            <MudStack Row="false" Class="px-9 py-1" Style="height: 60vh; max-height: 60vh; overflow-y: auto;">
                                @foreach (var subcateg in _subcategories)
                                {
                                    <MudPaper Class="rounded mb-1 px-6 py-3" Outlined="false" Elevation="5">
                                        <MudStack Row Spacing="0" AlignItems="AlignItems.Center">
                                            <MudText>@subcateg.Value</MudText>
                                            <MudSpacer/>
                                            <MudTooltip Placement="Placement.Bottom" Text="Éditer" Arrow>
                                                <MudIconButton Icon="@IconsF.Edit" Color="Color.Primary" Size="Size.Small" OnClick="@(async () => await EditAsync(subcateg))"/>
                                            </MudTooltip>
                                            <MudTooltip Class="ml-2" Placement="Placement.Bottom" Text="Supprimer" Arrow>
                                                <MudIconButton Class="ml-4" Icon="@IconsF.Delete" Color="Color.Error" Size="Size.Small" OnClick="@(async () => await DeleteAsync(subcateg))"/>
                                            </MudTooltip>
                                        </MudStack>
                                    </MudPaper>
                                }
                            </MudStack>
                        </MudStack>
                    </MudStack>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudTabPanel>